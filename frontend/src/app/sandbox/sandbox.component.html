<div class="sandbox">
  <!-- Toolbar -->
  <div class="toolbar">
    <div class="toolbar-left">
      <select
        [(ngModel)]="selectedLanguage"
        (ngModelChange)="onLanguageChange()"
        class="lang-select">
        @for (lang of languages; track lang.value) {
          <option [value]="lang.value">{{ lang.label }}</option>
        }
      </select>
    </div>
    <div class="toolbar-right">
      <span class="hint">Ctrl+Enter to run</span>
      <button
        class="run-btn"
        (click)="runCode()"
        [disabled]="isRunning">
        @if (isRunning) {
          <span class="spinner"></span> Running...
        } @else {
          Run
        }
      </button>
    </div>
  </div>

  <!-- Editor + Output split -->
  <div class="split">
    <div class="editor-pane">
      <div #editorContainer class="editor-container"></div>
      <div class="stdin-pane">
        <div class="stdin-header">Stdin</div>
        <textarea
          class="stdin-input"
          [(ngModel)]="stdinInput"
          placeholder="Standard input (for input()/readline)..."
          spellcheck="false"></textarea>
      </div>
    </div>
    <div class="output-pane">
      <div class="output-header">
        <span>Output</span>
        <div class="output-meta">
          @if (exitCode !== null) {
            <span class="exit-code" [class.exit-error]="exitCode !== 0">
              exit {{ exitCode }}
            </span>
          }
          @if (executionTime > 0) {
            <span class="exec-time">{{ executionTime }}ms</span>
          }
        </div>
      </div>
      <div #terminalContainer class="terminal-container"></div>
    </div>
  </div>
</div>
